<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>메인</title>
  <meta name="theme-color" content="#1A2E2E" />
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon-96x96.png') }}" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon-32x32.png') }}" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon-16x16.png') }}" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css">
  <script src="{{ url_for('static', filename='script/tailwind-config.js') }}"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/cal-heatmap/dist/cal-heatmap.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/cal-heatmap/dist/cal-heatmap.css">
  <script src="https://unpkg.com/cal-heatmap/dist/plugins/CalendarLabel.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/cal-heatmap/dist/plugins/Tooltip.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='script/common.js') }}"></script>
  <script src="{{ url_for('static', filename='script/main.js') }}" defer></script>
</head>

<body class="min-h-screen bg-jungle text-jungle/90 antialiased font-sans">
  <main class="min-h-screen flex items-start md:items-center justify-center p-6">
    <section class="w-full max-w-xl bg-white rounded-[28px] shadow-xl ring-1 ring-jungle/10 overflow-hidden">
      <!-- Header / Streak -->
      <header class="px-6 sm:px-8 pt-8">
        <div class="flex items-center justify-end">
          <button id="logoutBtn"
            class="px-3 py-1.5 text-sm rounded-lg ring-1 ring-jungle/10 text-jungle/70 hover:bg-jungle/5">로그아웃</button>
        </div>
        <h1 class="mt-2 text-2xl sm:text-3xl font-extrabold text-jungle tracking-tight flex items-center gap-2">
          <span>2025년 10월 2일</span>
          <span class="text-jungle/40">·</span>
          <span class="text-accent">7 days streak!!</span>
          <span class="ml-1">🔥</span>
        </h1>

        <!-- Optional badges to add interest -->
        <div class="mt-3 flex flex-wrap items-center gap-2">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-accent/15 text-jungle px-3 py-1 text-xs font-semibold ring-1 ring-inset ring-accent/30">
            🏆 연속 최고 기록: <span class="font-bold">14</span>일
          </span>
          <span
            class="inline-flex items-center gap-1 rounded-full bg-jungle/5 text-jungle px-3 py-1 text-xs font-semibold ring-1 ring-inset ring-jungle/10">
            📅 이번 달 참여: <span class="font-bold">18/22</span>
          </span>
        </div>
      </header>

      <!-- Content -->
      <div class="px-6 sm:px-8 pt-6 pb-8 space-y-6">
        <!-- Statistics -->
        <section>
          <h2 class="text-xs font-extrabold tracking-wider text-jungle/50 uppercase">Statistics</h2>
          <div class="mt-2 text-sm text-jungle/80 space-y-1.5">
            <p>오늘의 결산: <span class="font-semibold">50%</span> <span class="text-jungle/50">(20명 / 40명)</span></p>
            <p>나의 참여율: <span class="font-semibold">80%</span> <span class="text-jungle/50">(40일 / 50일)</span></p>
            <p>팀 참여율: <span class="font-semibold">77%</span></p>
          </div>
        </section>

        <!-- Heatmap placeholder -->
        <section class="relative">
          <h2 class="text-xs font-extrabold tracking-wider text-jungle/50 uppercase">TIL Calendar</h2>
          <div class="mt-3 rounded-xl ring-1 ring-inset ring-jungle/10 bg-jungle/5 p-4 overflow-hidden">
            <!-- Replace this with your actual heatmap implementation -->
            <div id="heatmap" class="grid grid-cols-14 gap-1.5">
              <div id="cal-heatmap"></div>
            </div>
          </div>
        </section>

        <!-- CTA Button -->
        <div class="pt-2">
          <a href="/list"
            class="block w-full text-center rounded-xl bg-neutral-700 text-white font-bold py-3 ring-1 ring-neutral-700/20 shadow transition hover:brightness-95 active:translate-y-px">
            오늘의 TIL 기록 보러가기
          </a>
        </div>
      </div>
    </section>
  </main>
      <!-- 푸시 알림 구독 요청 팝업(모달) -->
      <div id="push-notification-modal" style="display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 1000; text-align: center; border: 1px solid #ddd;">
        <h4 style="margin-top: 0;">알림을 허용하시겠어요?</h4>
        <p style="margin-bottom: 20px; font-size: 14px; color: #555;">허용해주시면 장기간 미사용 시 재방문을 위한 알림을 보내드립니다.</p>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button id="push-accept-btn" style="padding: 8px 16px; border: none; background-color: #007bff; color: white; border-radius: 5px; cursor: pointer;">허용</button>
            <button id="push-deny-btn" style="padding: 8px 16px; border: 1px solid #ccc; background-color: #f0f0f0; border-radius: 5px; cursor: pointer;">나중에</button>
        </div>
    </div>

    <!-- 푸시 알림 통합 스크립트 -->
    <script src="{{ url_for('static', filename='script/push_integration.js') }}"></script>
</body>

</html>